let deferredPrompt = null; window.addEventListener('beforeinstallprompt', (e) => { e.preventDefault(); deferredPrompt = e; }); document.querySelector('.appCompilation.mainBtn').addEventListener('click', async () => { if (!deferredPrompt) { alert(''); return; } deferredPrompt.prompt(); const { outcome } = await deferredPrompt.userChoice; if (outcome === 'accepted') { console.log(''); } else { console.log(''); } deferredPrompt = null; }); 